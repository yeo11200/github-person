id: testgen
model: gemini-pro
temperature: 0.1
input_vars: ["code", "structure"]
prompt: |
  ì‹œë‹ˆì–´ í…ŒìŠ¤íŠ¸ ì—”ì§€ë‹ˆì–´ë¡œì„œ ë‹¤ìŒ ì½”ë“œì— ëŒ€í•œ í¬ê´„ì ì´ê³  ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

  ì›ë³¸ ì½”ë“œ:
  ```typescript
  {{code}}
  ```

  ## ğŸ§ª í…ŒìŠ¤íŠ¸ ìƒì„± í•µì‹¬ ì›ì¹™:

  ### 1. í…ŒìŠ¤íŠ¸ íƒ€ì… ìë™ ê°ì§€:
  - âœ… React ì»´í¬ë„ŒíŠ¸ (.tsx/.jsx) â†’ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
  - âœ… ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (.ts/.js) â†’ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
  - âœ… API ì„œë¹„ìŠ¤ â†’ í†µí•© í…ŒìŠ¤íŠ¸
  - âœ… ìƒíƒœ ê´€ë¦¬ (Store) â†’ ìƒíƒœ í…ŒìŠ¤íŠ¸
  - âœ… ì»¤ìŠ¤í…€ í›… â†’ í›… í…ŒìŠ¤íŠ¸

  ### 2. React ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸:
  - âœ… ë Œë”ë§ í…ŒìŠ¤íŠ¸ (ë‹¤ì–‘í•œ props)
  - âœ… ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸ (í´ë¦­, ì…ë ¥ ë“±)
  - âœ… ì¡°ê±´ë¶€ ë Œë”ë§ ë¡œì§
  - âœ… ì—ëŸ¬ ê²½ê³„ ë° ì—ì§€ ì¼€ì´ìŠ¤
  - âœ… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (ë©”ëª¨ì´ì œì´ì…˜, ë¦¬ë Œë”ë§)
  - âœ… ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ (í‚¤ë³´ë“œ, ìŠ¤í¬ë¦° ë¦¬ë”)

  ### 3. ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸:
  - âœ… ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ (ì…ë ¥/ì¶œë ¥)
  - âœ… ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
  - âœ… ì—£ì§€ ì¼€ì´ìŠ¤ ë° ê²½ê³„ê°’
  - âœ… íƒ€ì… ì•ˆì „ì„± ê²€ì¦
  - âœ… ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

  ### 4. API/ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸:
  - âœ… HTTP ìš”ì²­/ì‘ë‹µ ëª¨í‚¹
  - âœ… ì—ëŸ¬ ì²˜ë¦¬ ì‹œë‚˜ë¦¬ì˜¤
  - âœ… ì¬ì‹œë„ ë¡œì§ í…ŒìŠ¤íŠ¸
  - âœ… íƒ€ì„ì•„ì›ƒ ë° ì·¨ì†Œ í…ŒìŠ¤íŠ¸

  ### 5. ìƒíƒœ ê´€ë¦¬ í…ŒìŠ¤íŠ¸:
  - âœ… ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜ í…ŒìŠ¤íŠ¸
  - âœ… ìƒíƒœ ë³€í™” ê²€ì¦
  - âœ… ë¹„ë™ê¸° ì•¡ì…˜ í…ŒìŠ¤íŠ¸
  - âœ… ì…€ë ‰í„° í…ŒìŠ¤íŠ¸

  ## ğŸ”§ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ë° ë„êµ¬:

  ```typescript
  // âœ… ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì„¤ì •
  import { render, screen, fireEvent, waitFor } from '@testing-library/react';
  import { renderHook, act } from '@testing-library/react-hooks';
  import userEvent from '@testing-library/user-event';
  import { vi, describe, it, expect, beforeEach, afterEach } from 'vitest';

  // âœ… React ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
  describe('MyComponent', () => {
    const defaultProps = {
      title: 'Test Title',
      onSubmit: vi.fn(),
    };

    beforeEach(() => {
      vi.clearAllMocks();
    });

    describe('ë Œë”ë§', () => {
      it('ê¸°ë³¸ propsë¡œ ì •ìƒ ë Œë”ë§ëœë‹¤', () => {
        render(<MyComponent {...defaultProps} />);
        expect(screen.getByText('Test Title')).toBeInTheDocument();
      });

      it('loading ìƒíƒœì¼ ë•Œ ìŠ¤í”¼ë„ˆë¥¼ í‘œì‹œí•œë‹¤', () => {
        render(<MyComponent {...defaultProps} loading />);
        expect(screen.getByTestId('loading-spinner')).toBeInTheDocument();
      });
    });

    describe('ì‚¬ìš©ì ìƒí˜¸ì‘ìš©', () => {
      it('ë²„íŠ¼ í´ë¦­ ì‹œ onSubmitì´ í˜¸ì¶œëœë‹¤', async () => {
        const user = userEvent.setup();
        render(<MyComponent {...defaultProps} />);
        
        await user.click(screen.getByRole('button', { name: /submit/i }));
        expect(defaultProps.onSubmit).toHaveBeenCalledTimes(1);
      });
    });

    describe('ì„±ëŠ¥', () => {
      it('ë™ì¼í•œ propsë¡œ ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠëŠ”ë‹¤', () => {
        const { rerender } = render(<MyComponent {...defaultProps} />);
        const renderCount = vi.fn();
        
        // ë Œë”ë§ ì¹´ìš´íŠ¸ ì¶”ì  ë¡œì§
        rerender(<MyComponent {...defaultProps} />);
        expect(renderCount).toHaveBeenCalledTimes(1);
      });
    });

    describe('ì ‘ê·¼ì„±', () => {
      it('í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ì´ ì‘ë™í•œë‹¤', async () => {
        const user = userEvent.setup();
        render(<MyComponent {...defaultProps} />);
        
        await user.tab();
        expect(screen.getByRole('button')).toHaveFocus();
      });

      it('ì ì ˆí•œ ARIA ì†ì„±ì„ ê°€ì§„ë‹¤', () => {
        render(<MyComponent {...defaultProps} />);
        expect(screen.getByRole('button')).toHaveAttribute('aria-label');
      });
    });
  });

  // âœ… ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
  describe('formatDate', () => {
    it('ìœ íš¨í•œ ë‚ ì§œë¥¼ ì˜¬ë°”ë¥´ê²Œ í¬ë§·í•œë‹¤', () => {
      const date = new Date('2023-12-25');
      expect(formatDate(date)).toBe('2023-12-25');
    });

    it('ì˜ëª»ëœ ì…ë ¥ì— ëŒ€í•´ ì—ëŸ¬ë¥¼ ë˜ì§„ë‹¤', () => {
      expect(() => formatDate('invalid')).toThrow('Invalid date');
    });

    it('null/undefined ì…ë ¥ì„ ì²˜ë¦¬í•œë‹¤', () => {
      expect(formatDate(null)).toBe('');
      expect(formatDate(undefined)).toBe('');
    });
  });

  // âœ… ì»¤ìŠ¤í…€ í›… í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
  describe('useCounter', () => {
    it('ì´ˆê¸°ê°’ìœ¼ë¡œ ì‹œì‘í•œë‹¤', () => {
      const { result } = renderHook(() => useCounter(5));
      expect(result.current.count).toBe(5);
    });

    it('increment í•¨ìˆ˜ê°€ ì¹´ìš´íŠ¸ë¥¼ ì¦ê°€ì‹œí‚¨ë‹¤', () => {
      const { result } = renderHook(() => useCounter(0));
      
      act(() => {
        result.current.increment();
      });
      
      expect(result.current.count).toBe(1);
    });
  });

  // âœ… API ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
  describe('userApi', () => {
    beforeEach(() => {
      vi.resetAllMocks();
    });

    it('ì‚¬ìš©ì ëª©ë¡ì„ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ì˜¨ë‹¤', async () => {
      const mockUsers = [{ id: 1, name: 'John' }];
      vi.mocked(fetch).mockResolvedValueOnce({
        ok: true,
        json: () => Promise.resolve(mockUsers),
      } as Response);

      const users = await userApi.getUsers();
      expect(users).toEqual(mockUsers);
    });

    it('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•œë‹¤', async () => {
      vi.mocked(fetch).mockRejectedValueOnce(new Error('Network error'));
      
      await expect(userApi.getUsers()).rejects.toThrow('Network error');
    });
  });
  ```

  ## ğŸš€ ê³ ê¸‰ í…ŒìŠ¤íŠ¸ íŒ¨í„´:

  ### 1. í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°:
  ```typescript
  // ì»¤ìŠ¤í…€ ë Œë” í•¨ìˆ˜
  const renderWithProviders = (ui: ReactElement, options = {}) => {
    const Wrapper = ({ children }: { children: ReactNode }) => (
      <ThemeProvider theme={testTheme}>
        <QueryClient client={testQueryClient}>
          {children}
        </QueryClient>
      </ThemeProvider>
    );

    return render(ui, { wrapper: Wrapper, ...options });
  };

  // ê³µí†µ í…ŒìŠ¤íŠ¸ ë°ì´í„°
  const createMockUser = (overrides = {}) => ({
    id: 1,
    name: 'Test User',
    email: 'test@example.com',
    ...overrides,
  });
  ```

  ### 2. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸:
  ```typescript
  // ë Œë”ë§ ì„±ëŠ¥ ì¸¡ì •
  const measureRenderTime = (component: ReactElement) => {
    const start = performance.now();
    render(component);
    const end = performance.now();
    return end - start;
  };

  // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í…ŒìŠ¤íŠ¸
  const testMemoryLeak = async (component: ReactElement) => {
    const { unmount } = render(component);
    // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¸¡ì • ë¡œì§
    unmount();
    // ì •ë¦¬ í›„ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
  };
  ```

  ### 3. í†µí•© í…ŒìŠ¤íŠ¸:
  ```typescript
  // E2E ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸
  describe('ì‚¬ìš©ì í”Œë¡œìš°', () => {
    it('ë¡œê·¸ì¸ë¶€í„° ë°ì´í„° ì¡°íšŒê¹Œì§€ ì™„ì „í•œ í”Œë¡œìš°ë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤', async () => {
      const user = userEvent.setup();
      
      render(<App />);
      
      // ë¡œê·¸ì¸
      await user.type(screen.getByLabelText(/email/i), 'test@example.com');
      await user.type(screen.getByLabelText(/password/i), 'password');
      await user.click(screen.getByRole('button', { name: /login/i }));
      
      // ë°ì´í„° ë¡œë”© ëŒ€ê¸°
      await waitFor(() => {
        expect(screen.getByText(/welcome/i)).toBeInTheDocument();
      });
      
      // ë°ì´í„° ì¡°íšŒ
      await user.click(screen.getByRole('button', { name: /load data/i }));
      
      await waitFor(() => {
        expect(screen.getByTestId('data-list')).toBeInTheDocument();
      });
    });
  });
  ```

  ## ğŸ“‹ ì¶œë ¥ í˜•ì‹:

  ---
  ## ğŸ“„ íŒŒì¼: `ì›ë³¸íŒŒì¼ëª….test.ts` ë˜ëŠ” `ì›ë³¸íŒŒì¼ëª….test.tsx`
  ```typescript
  [í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ]
  [ìë™ ê°ì§€ëœ í…ŒìŠ¤íŠ¸ íƒ€ì…ì— ë§ëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤]
  [ì„±ëŠ¥, ì ‘ê·¼ì„±, ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ í¬í•¨]
  [ì‹¤ìš©ì ì´ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸]
  ```

  ---

  **ì¤‘ìš” ê·œì¹™:**
  - ì„¤ëª… ì—†ì´ ì‹¤í–‰ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë§Œ ì¶œë ¥
  - ì½”ë“œ íƒ€ì…ì„ ìë™ ê°ì§€í•˜ì—¬ ì ì ˆí•œ í…ŒìŠ¤íŠ¸ ì‘ì„±
  - ëª¨ë“  í…ŒìŠ¤íŠ¸ì— ëª…í™•í•œ ì„¤ëª…ê³¼ ê·¸ë£¹í™” ì ìš©
  - ì„±ëŠ¥ê³¼ ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ ë°˜ë“œì‹œ í¬í•¨
  - ì‹¤ì œ ë²„ê·¸ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” ì˜ë¯¸ìˆëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±
  - Mockê³¼ í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹° ì ì ˆíˆ í™œìš©
  - ì—ì§€ ì¼€ì´ìŠ¤ì™€ ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ ì¶©ë¶„íˆ ì»¤ë²„

  ì§€ê¸ˆ ë°”ë¡œ ìœ„ í˜•ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¶œë ¥í•˜ì„¸ìš”:
